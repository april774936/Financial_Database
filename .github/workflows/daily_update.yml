name: Daily Database Update

on:
  schedule:
    - cron: '40 8 * * 1-5'   # 월-금 한국시간 17:40
    - cron: '10 14 * * 1-5'  # 월-금 한국시간 23:10
  workflow_dispatch:          # 필요할 때 수동으로도 실행 가능

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install
        run: pip install fredapi gspread oauth2client pandas yfinance

      - name: Run Update
        env:
          GSPREAD_JSON: ${{ secrets.GSPREAD_JSON }}
          SPREADSHEET_ID: ${{ secrets.SPREADSHEET_ID }}
          FRED_API_KEY: ${{ secrets.FRED_API_KEY }}
        run: python update_db.py
